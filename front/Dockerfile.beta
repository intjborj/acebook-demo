FROM node:16.13.0-alpine
WORKDIR /usr/src/app/acebook_beta/front
COPY package*.json ./
COPY . .

ENV FRAMEWORK_PROVIDER="graphql"
ENV NEXT_PUBLIC_GRAPHQL_API_ENDPOINT="https://192.168.254.240.sslip.io/graphql"
ENV NEXT_PUBLIC_GRAPHQL_API_ENDPOINT_SUBSCRIPTION_DEV="wss://192.168.254.240.sslip.io/graphql"
ENV NEXT_PUBLIC_PROD_FRONTEND_ENDPOINT="https://192.168.254.240.getmoss.site"
ENV NEXT_PUBLIC_SITE_URL="https://192.168.254.240.getmoss.site"
ENV NEXT_PUBLIC_FILE_SERVER_PROD="https://192.168.254.240.xip.moss.sh/ftp/uploads/"
ENV NEXT_PUBLIC_CLIENT_ENC_SECRET = "ACE78!!hjiNew90JckyDevSE"
ENV SECRET=ACEBOOK123!!
ENV GOOGLE_CLIENT_SECRET=232432

RUN yarn

RUN yarn build:gql
EXPOSE 6100

CMD ["yarn", "start"]

